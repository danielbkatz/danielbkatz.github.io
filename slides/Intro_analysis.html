<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
  <head>
    <title>An Introduction to R: Data Cleaning, Wrangling, Visualizing, and Everything Else</title>
    <meta charset="utf-8" />
    <meta name="author" content="Daniel Katz" />
    <link rel="stylesheet" href="xaringan-themer.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">
class: center, middle, my-title, title-slide

# An Introduction to R: Data Cleaning, Wrangling, Visualizing, and Everything Else
## Part 3
### Daniel Katz

---


class: middle




## Tidy data principles
#### The notion of tidy data comes from Hadley Wickham, the author of the tidyverse
+ The philosophy of tidy data shapes the tidyverse

1. Each variable has its own column
2. Each observation has its own row
3. Each value has its own cell

Because...
1. Uniformity makes everything easier and you know how your data is stored
2. It makes vectorization easier

However, sometimes we need both tidy forms, and non-tidyforms of data

---
Tidy (long data):
&lt;table&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:left;"&gt; country &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; year &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; cases &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; population &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Afghanistan &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1999 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 745 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 19987071 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Afghanistan &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2000 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2666 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 20595360 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Brazil &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1999 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 37737 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 172006362 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Brazil &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2000 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 80488 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 174504898 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; China &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1999 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 212258 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1272915272 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; China &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2000 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 213766 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1280428583 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

Not tidy (wide data):
&lt;table&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:left;"&gt; country &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; 1999 &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; 2000 &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Afghanistan &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 745 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2666 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Brazil &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 37737 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 80488 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; China &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 212258 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 213766 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
Years, here, are actually a value in their own right, thus values in a variable. Read more on the spread and gather functions, [here](https://r4ds.had.co.nz/tidy-data.html#spreading-and-gathering)

---
## Next functions go together, they're `group_by()` and `summarize()`

+ They do exactly what you think, but it's one of the more powerful tools in dplyr.

+ Let's use our `co16_rem` data.frame again


```r
names(co16_rem)
```

```
##  [1] "CDS"                        "Name"                      
##  [3] "AggLevel"                   "DFC"                       
##  [5] "Subgroup"                   "Subgrouptype"              
##  [7] "NumCohort"                  "NumGraduates"              
##  [9] "Cohort Graduation Rate"     "NumDropouts"               
## [11] "Cohort Dropout Rate"        "NumSpecialEducation"       
## [13] "Special Ed Completers Rate" "NumStillEnrolled"          
## [15] "Still Enrolled Rate"        "NumGED"                    
## [17] "GED Rate"                   "Year"
```
---
## The details
+ `group_by()` groups data together by some factor (such as class participation)

+ `summarize` performs some operation on the grouped data. 

+ This is often useful for carrying out summary statistics-type analysis

---
## Example `summarize()` and `group_by`

+ Let's get the average cohort size for males and females 


```r
table(co16_rem$Subgroup)
```

```
## 
##   All    EL   FEM   MAL   MIG    SD    SE 
## 23219  3173 19876 20614  1372  3578  3430
```

```r
mvf &lt;- co16_rem %&gt;% 
  select(CDS, DFC, AggLevel, Subgroup, Subgrouptype,
         NumCohort) %&gt;% 
  filter(AggLevel=="D", DFC=="N",
         Subgroup=="FEM"| Subgroup=="MAL",  
         Subgrouptype=="All") %&gt;% 
* group_by(Subgroup) %&gt;%
* summarize(mean_co = mean(NumCohort, na.rm = T),
*           se = sd(NumCohort, na.rm = T))
```
&lt;table&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:left;"&gt; Subgroup &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; mean_co &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; se &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; FEM &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 471.3473 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 961.308 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; MAL &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 491.6615 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1007.660 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
- The average number of females in a district is 471, standard error of 961.

---

class: middle

## Challenge, `group_by()` and `summarize()`

1. Edit the code above so you're grouping by Subgroup and Subgrouptype. 

2. However, with Subgroup, filter it to include Male, Female, and "All".

3. We'll look at something the state of CA always looks at: group by Subgrouptype such that we keep only those classified by CA as "Hispanic or Latinx" (5), "African American" (6), "White, not Hispanic (7), and "All".

3. With as an outcome, instead of NumCohort, use NumGraduates

---
class: middle

# Solution


```r
mvf &lt;- co16_rem %&gt;% 
  select(CDS, DFC, AggLevel, Subgroup, Subgrouptype,
         NumGraduates) %&gt;% 
  filter(AggLevel=="D", 
         DFC=="N",
         Subgroup=="MAL"| 
           Subgroup=="FEM"|
           Subgroup=="All"|
         Subgrouptype==5|
           Subgrouptype==6|
           Subgrouptype==7) %&gt;% 
  group_by(Subgroup, Subgrouptype) %&gt;%
  summarize(mean_grad = mean(NumGraduates, na.rm = T), 
            se = sd(NumGraduates, na.rm = T))
```
---
&lt;table&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:left;"&gt; Subgroup &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; Subgrouptype &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; mean_grad &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; se &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; All &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 0 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 27.60000 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 23.69690 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; All &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 21.67797 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 21.83357 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; All &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 2 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 177.19718 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 281.27695 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; All &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 3 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 25.22807 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 21.12042 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; All &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 4 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 75.90964 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 111.06224 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; All &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 5 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 451.90408 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1139.34147 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
---

```r
widemvf &lt;- mvf %&gt;% 
  gather(unit, numgrad, mean_grad:se) %&gt;% 
  unite(temp1, Subgrouptype, unit, sep = ".") %&gt;% 
  spread(temp1, numgrad)

widemvf
```

```
## # A tibble: 3 x 21
## # Groups:   Subgroup [3]
##   Subgroup `0.mean_grad` `0.se` `1.mean_grad` `1.se` `2.mean_grad` `2.se`
##   &lt;chr&gt;            &lt;dbl&gt;  &lt;dbl&gt;         &lt;dbl&gt;  &lt;dbl&gt;         &lt;dbl&gt;  &lt;dbl&gt;
## 1 All               27.6   23.7          21.7   21.8          177.   281.
## 2 FEM               25.8   12.7          23.1   17.1          102.   148.
## 3 MAL               23.4   13.8          22.2   16.4          104.   149.
## # ... with 14 more variables: `3.mean_grad` &lt;dbl&gt;, `3.se` &lt;dbl&gt;,
## #   `4.mean_grad` &lt;dbl&gt;, `4.se` &lt;dbl&gt;, `5.mean_grad` &lt;dbl&gt;, `5.se` &lt;dbl&gt;,
## #   `6.mean_grad` &lt;dbl&gt;, `6.se` &lt;dbl&gt;, `7.mean_grad` &lt;dbl&gt;, `7.se` &lt;dbl&gt;,
## #   `9.mean_grad` &lt;dbl&gt;, `9.se` &lt;dbl&gt;, All.mean_grad &lt;dbl&gt;, All.se &lt;dbl&gt;
```
---
# What if I want to know frequencies?
 + Can just do the same as above but use `n()`
 

```r
freqtab &lt;- co16 %&gt;%
  group_by(Subgroup, Subgrouptype) %&gt;%
  summarise (n = n()) %&gt;%
  mutate(freq = n / sum(n))
```

&lt;table&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:left;"&gt; Subgroup &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; Subgrouptype &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; n &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; freq &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; All &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 0 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 740 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.0318705 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; All &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1730 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.0745079 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; All &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 2 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2249 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.0968603 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; All &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 3 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1419 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.0611137 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; All &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 4 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1830 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.0788148 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; All &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 5 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 3458 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.1489298 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
---

class: middle

# Data VIZ with ggplot2
+ ggplot2 is a package built for visualizing all of our data. 

+ I might say we've done things a little backwards, it might be good to start with data visualization. 

+ the general form of ggplot is:
`ggplot(data, aes(mapping)) + geom_function(aes(mappings))`

---
## Example
.pull-left[

```r
graphdata &lt;- co16_rem %&gt;%
 filter(DFC == "N", 
        AggLevel=="D", 
        Subgroup != "All", 
        Subgrouptype=="All")
```


```r
ggplot(data=graphdata, 
       aes(x=`Cohort Dropout Rate`, y=`GED Rate`)) + 
         geom_point(aes(color=Subgroup)) +
         geom_smooth(method = lm) 
```
]

.pull-right[
![](Intro_analysis_files/figure-html/unnamed-chunk-13-1.png)&lt;!-- --&gt;
]
---
## Logic of ggplot2
+ "An aesthetic is a visual property of the objects in your plot. Aesthetics include things like the size, the shape, or the color of your points."
  - Garrett Grolemund &amp; Hadley Wickham in [R for Data Science](https://r4ds.had.co.nz/data-visualisation.html#aesthetic-mappings)

+ That is, we have to make some decisions about how aesthetics should be mapped to your data. 

+ For instance, the x-axis aesthetic in the plot previously, was mapped to `Cohort Dropout Rate` and the color was mapped to `subgroup`

+ Other aesthetics include size and shape

+ It's important to know the `class` of your variables
---
# Another example
Just a histogram?


```r
ggplot(data=graphdata, 
       aes(x=NumCohort)) + 
  geom_histogram()
```

```
## `stat_bin()` using `bins = 30`. Pick better value with `binwidth`.
```

```
## Warning: Removed 458 rows containing non-finite values (stat_bin).
```

![](Intro_analysis_files/figure-html/unnamed-chunk-14-1.png)&lt;!-- --&gt;


---
## Warmup


```r
graphdata &lt;- co16_rem %&gt;%
 filter(DFC == "N", 
        AggLevel=="D", 
        Subgroup != "All", 
        Subgrouptype=="All")

plot1 &lt;- ggplot(data=graphdata, 
                aes(x=`Cohort Dropout Rate`, y=`GED Rate`)) + 
         geom_point(aes(color=Subgroup))
plot1
```

1. What variables in co16_rem are categorical? Continuous? (hint, there's one command)
1. Using `co16_rem` and the code above, map a continuous variable to color, size, and shape (using geom_point). How do these aesthetics behave differently for categorical vs. continuous variables?
1. Use ?geom_point to find out what the `stroke` aesthetic does
1. instead of `color=Subgroup` above, use `color=`GED Rate` &gt;.3)
1. What other `geom_functions` are there?

---
# Challenge: Aesthetics
+ In California, Charter Schools are often continuation schools.

+ Much of the charter school debate doesn't really look at continuation schools

Using ggplot2, answer the questions:

+ Is there a relationship between the size of a school (NumCohort) and the grad rate (`Cohort Graduation Rate`)?

+ Does this relationship look different for charters and non-charter schools?

+ How might we visualize?

+ Hint, The code for school level data for AggLevel = "S", Use subgroup and subgrouptype ="All", start with co16_rem and filter

---

```r
graphdata2 &lt;- co16_rem %&gt;% 
  filter(AggLevel=="S", 
         Subgroup=="All", 
         Subgrouptype=="All")

plot2 &lt;- ggplot(graphdata2, 
            aes(NumCohort, `Cohort Graduation Rate`))+
  geom_point(aes(color=DFC)) 
plot2
```

```
## Warning: Removed 471 rows containing missing values (geom_point).
```

&lt;img src="Intro_analysis_files/figure-html/unnamed-chunk-16-1.png" height="60%" style="display: block; margin: auto;" /&gt;

---
## We can also do this with pipes all the way through

```r
plot2 &lt;- co16_rem %&gt;% 
  filter(AggLevel=="S", 
         Subgroup=="All", 
         Subgrouptype=="All") %&gt;%
  ggplot(aes(x=NumCohort, y=`Cohort Graduation Rate`))+
  geom_point(aes(color=DFC)) 

plot2
```

```
## Warning: Removed 471 rows containing missing values (geom_point).
```

![](Intro_analysis_files/figure-html/unnamed-chunk-17-1.png)&lt;!-- --&gt;

---

class: middle

## Using facets

+ Can we looked at the distributions of cohort sizes by non-charters and charters?

+ Can we answer the questions from the previous slides *within* charters and non-charters?

+ Absolutely, with facet_wrap

---


```r
plot3 &lt;- ggplot(graphdata2, 
            aes(NumCohort))+
  geom_histogram() + facet_wrap(~DFC)

plot3
```

```
## `stat_bin()` using `bins = 30`. Pick better value with `binwidth`.
```

```
## Warning: Removed 471 rows containing non-finite values (stat_bin).
```

![](Intro_analysis_files/figure-html/unnamed-chunk-18-1.png)&lt;!-- --&gt;

---
# Challenge: Facets
+ Facets use `~` which denotes a `formula.`

+ A formula is simply another data-structure in R. Don't worry about that, for now. 

+ You can have two sides to the formula. To see this, run the code:

```r
graphdata3 &lt;- co16_rem %&gt;% 
  filter(AggLevel=="S", 
         Subgroup=="MAL"| Subgroup=="FEM", 
         Subgrouptype=="All")

plot4 &lt;- ggplot(graphdata3, 
            aes(NumDropouts))+
  geom_histogram() + facet_wrap(~Subgroup, nrow=1)

#vs 

plot5 &lt;- ggplot(graphdata3, 
            aes(NumDropouts))+
  geom_histogram() + facet_wrap(DFC~Subgroup)
```

---

```r
plot4
```

```
## `stat_bin()` using `bins = 30`. Pick better value with `binwidth`.
```

```
## Warning: Removed 4131 rows containing non-finite values (stat_bin).
```

![](Intro_analysis_files/figure-html/unnamed-chunk-20-1.png)&lt;!-- --&gt;
---
class: middle
# What happens when you replace facet_wrap with facet_grid?

---

```r
plot6 &lt;- ggplot(graphdata3, 
            aes(NumDropouts))+
  geom_histogram() + facet_grid(DFC~Subgroup)

plot6
```

```
## `stat_bin()` using `bins = 30`. Pick better value with `binwidth`.
```

```
## Warning: Removed 4131 rows containing non-finite values (stat_bin).
```

![](Intro_analysis_files/figure-html/unnamed-chunk-21-1.png)&lt;!-- --&gt;

---
    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"highlightStyle": "agate",
"highlightLines": true
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();</script>

<script>
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
