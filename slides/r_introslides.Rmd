---
title: 'An Introduction to R: Data Cleaning, Wrangling, Visualizing, and Everything Else'
author: "Daniel Katz"
output:
  xaringan::moon_reader:
    lib_dir: libs
    css: xaringan-themer.css
    nature:
      titleSlideClass: ["center", "middle", "my-title"]
      highlightStyle: github
      highlightLines: true


---

class: middle
```{r setup, include=FALSE}
options(htmltools.dir.version = FALSE)
```
```{r xaringan-themer, include = FALSE}
library(xaringanthemer)
mono_light(
  base_color = "#1c5253"
           )
```

# Introduction


```{r message=FALSE, warning=FALSE, include=FALSE}
library(tidyverse)
library(caTools)
library(gganimate)
library(knitr)
```

+ I'm a fourth year grad student at UCSB

+ Began chipping away at learning R about four years ago

+ It was really frustrating

+ After a major project or two, it became my preferred tool for most things data analysis

+ I don't expect you to be experts after this session, but I hope you know where to start!

---

class: center, middle

### What are you hoping to get out of thise course?
---

class: middle

### Teaching Philosophy/General Strategy


+ My goal is to get you up and running - doing is the best learning
  
+ I'm going with a `tidyverse` [_**first**_](http://varianceexplained.org/r/teach-tidyverse/) approach while mixing in foundations that I find unavoidable [_**Click to read more**_](http://varianceexplained.org/r/teach-tidyverse/)

+ I won't emphasize style/best practices except in a few cases

+ I think it's important to focus on ideas and functions!

+ For more on style/best practices, [_**click here**_](http://adv-r.had.co.nz/Style.html)

---

## General Outline
1. Intro: What is R? How should I think about R and Rstudio?

2. Some basic data structures (unavoidable foundation)

3. Data wrangling with the `tidyverse`

4. Data exploration
  + Visualization
  + Descriptive Statistics
  
5. Basic modelling in R

6. Other Help Resources

---

class: middle

# What is R?

+ R is a software and scripting language

+ Like any other language it has syntax (for now think, "rules" of language)

+ R comes with a variety of built-in functions

+ R is desiged for statistics, but you can do lots with it 
  + build websites
  + write documents in Latex
  + Create slides for presentations, etc.

---

# R and Packages
+ Think of `packages` as very specialized bundles of software. 
  + They're collections of functions developed by the "community"
  + For a full intro, [_**click here**_](https://www.datacamp.com/community/tutorials/r-packages-guide#what)

+ These packages have documentation if they're on `CRAN: The Comprehensive R Archive Network` (and even sometimes if they're not)  
  
+ You don't need all the packages!

+ For instance, the `psych` package is a built with tools commonly needed in the social sciences
  
--
  
+ We'll be focusing on a suite of packages called the `tidyverse`, which helps with data exploration, cleaning, and visualization
---

class: middle

## Packages, cont'd
+ When you `install.packages()`, R will search for a package on `CRAN` and download it to your computer

+ To see where it's downloaded, type `.libpaths()` and run this

+ Each time you start a new R session, you have to load a package via `library()` but you don't have to install, each time
---

class: middle

# Installing and Loading Packages 
Installs the package if it's not already installed:

`install.packages("psych")`

Loads the package so I can use the functions in the `psych` package"
`library(psych)`
---

class: middle 


## Installing and loading packages looks like this

`install.packages("psych)`  
`library(psych)` 
---

class: middle
  
# Why do I like R?
+ It is quickly becoming the statistical language of choice in academic and non-academic circles  

--
  
+ Fast developing `R Packages` are making tasks more accessible to non-programmers like us
  
--
  
+ R allows for sharing code: we won't cover Github, but please [_**check it out**_](https://happygitwithr.com/rstudio-git-github.html)
  
--
  
+ R forces us to slow down and think

---

# It makes really cool data visualizations

```{r echo=FALSE, fig.align='center', message=FALSE, warning=FALSE, out.width='75%'}
ggplot(mpg, aes(displ, hwy)) +
  geom_point(aes(colour = class)) +
  geom_smooth(se = FALSE) +
  theme(legend.position = "bottom") +
  guides(colour = guide_legend(nrow = 1, override.aes = list(size = 4))) +
   labs(
    x = "Engine displacement (L)",
    y = "Highway fuel economy (mpg)",
    colour = "Car type"
  )
```

---
 
```{r echo=FALSE, fig.align='center', message=FALSE}
ggplot(mpg, aes(x= factor(manufacturer),y=hwy))+geom_boxplot(aes(fill=manufacturer))+
theme(axis.text.x = element_text(angle = 90, hjust = 1))
```

---

class: middle, center

## What's a Function?

---


```{r echo=FALSE, fig.align='center', out.width='90%'}
knitr::include_graphics("cyclists.gif")

```

---

# Other Forms of Functions?
$f(x)=sin(\theta)$ 

`f_angle <- sin(angle)` 
```{r makingdat, fig.align='center', message=FALSE, warning=FALSE, include=FALSE}
library(transformr)

angle <- matrix(seq(from = 1, to=20, by=.2),ncol=1)
output <- as.data.frame(sin(angle))
findat <- cbind(angle, output) %>% mutate(time1 = angle)

sinanimate <- ggplot(findat, aes(x=angle, y = V1)) + geom_line(size=.8, color="blue") + geom_point() +  labs(x="angle", y = "sin(angle)")+ transition_reveal(time1) + ease_aes('linear')
```

```{r echo=FALSE, message=FALSE, warning=FALSE}
animate(sinanimate, height = 500, width =900)
```

---
## What are some functions we use?
.pull-left[## How about a mean?
Let's say we have a vector, `x`, with five elements: `1,2,3,4,5`    

`x = [1,2,3,4,5]`

$mean(x)=\frac{1+2+3+4+5}{5}$ 

$mean(x) = 3$]

--
.pull-right[## `R` uses functions:
```{r echo=TRUE}
#Let's make a vector with 
#five elements

x <- c(1,2,3,4,5)

mean(x)
```
]
---

## There are also other forms of functions we use in computation
+ "Reading in" Data into R so we can explore or model

+ Linear Regression,`lm()` in R

+ Transforming Data in R:
```{r echo=FALSE}
knitr::include_graphics("gatheringdata.jpg")
```
From, [_**R for Data Science by Grolemund and Wickham**_](https://r4ds.had.co.nz/)

---

# Open R Studio

1. Once open, click File (top left) > New Project > New Directory > New Project >Create Project as a Subdirectory of: click browse.
  
2. Choose where you'd like to put this session's R work. 

3. Go to the first box, `Directory Name` > Name this R project! (no spaces; It'll make your life easier)

4. Create Project.
 
This is specific to R and Rstudio. *Working directories* (think directories = folders) is where this project will look for files, save documents, and results.

--- 


## Let's get Our Hands Dirty (Recommendations)
  
+ The best way to learn R is to use it

+ Even when it's frustratingly slow, use R instead of something else
  
+ There are a lot of resources online to answer questions (Stack Exchange, Stack Overflow, Github)
  
+ Errors are good! Use the error output to guide your thinkingg (and Googling)

+ In other words, "failing fast" is really convenient
--- 

# Vocabulary
          
| R Word   | Translation
|----------|------------------
| Script   | Document containing code to be run
| Console  | Output Window/Printer (but you can also run code here)
| Environment| The place where things you create in R, live
| Working Directory| The folder where your current R session lives, where output files go


---

# Open Up Rstudio
1. Find the `View` tab and change your RStudio session to looks like mine
2. Change your R studio Session to look different
3. Find the `Global Environment` (what's in there right now?)
4. Type `4+3` into the `console` and run the code
5. Type `4*3` into a `script` and run the code
---


# Operators in R
|Operation|Operator in R |Example|
|---------|------|-------|-------|
|Addition |`+` |`4+3`
|Subtraction|`-`| `4-3`
|Multiplication|`*`| `4*3`
|Exponentiation | `**`| `4**3`
|Division | `/`| `12/4`
|Matrix multiplication|`%*%`| `a %*% b`|

**Aside from the matrix multiplication, make sure all of these work in `R`** (use a script!)

---


## Working!

`<-`  
is an assignment operator. This assigns some value to a `variable`  
    
For instance:
```{r echo=TRUE}
x <- 2
x

#What's the value of y?
y <- x+2
```
--- 





